(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[835],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>l,r:()=>o});var s=a(5155);a(2115);var i=a(9708),r=a(2085),n=a(9434);let o=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:a,size:r,asChild:l=!1,...d}=e,c=l?i.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,n.cn)(o({variant:a,size:r,className:t})),...d})}},1788:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},2346:(e,t,a)=>{"use strict";a.d(t,{w:()=>n});var s=a(5155);a(2115);var i=a(7489),r=a(9434);function n(e){let{className:t,orientation:a="horizontal",decorative:n=!0,...o}=e;return(0,s.jsx)(i.b,{"data-slot":"separator-root",decorative:n,orientation:a,className:(0,r.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...o})}},3717:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4416:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4636:(e,t,a)=>{"use strict";a.d(t,{AM:()=>n,Wv:()=>o,hl:()=>l});var s=a(5155);a(2115);var i=a(547),r=a(9434);function n(e){let{...t}=e;return(0,s.jsx)(i.bL,{"data-slot":"popover",...t})}function o(e){let{...t}=e;return(0,s.jsx)(i.l9,{"data-slot":"popover-trigger",...t})}function l(e){let{className:t,align:a="center",sideOffset:n=4,...o}=e;return(0,s.jsx)(i.ZL,{children:(0,s.jsx)(i.UC,{"data-slot":"popover-content",align:a,sideOffset:n,className:(0,r.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...o})})}},4838:(e,t,a)=>{"use strict";a.d(t,{SQ:()=>d,_2:()=>c,hO:()=>u,mB:()=>m,rI:()=>o,ty:()=>l});var s=a(5155);a(2115);var i=a(8698),r=a(5196),n=a(9434);function o(e){let{...t}=e;return(0,s.jsx)(i.bL,{"data-slot":"dropdown-menu",...t})}function l(e){let{...t}=e;return(0,s.jsx)(i.l9,{"data-slot":"dropdown-menu-trigger",...t})}function d(e){let{className:t,sideOffset:a=4,...r}=e;return(0,s.jsx)(i.ZL,{children:(0,s.jsx)(i.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,n.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...r})})}function c(e){let{className:t,inset:a,variant:r="default",...o}=e;return(0,s.jsx)(i.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":r,className:(0,n.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...o})}function u(e){let{className:t,children:a,checked:o,...l}=e;return(0,s.jsxs)(i.H_,{"data-slot":"dropdown-menu-checkbox-item",className:(0,n.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),checked:o,...l,children:[(0,s.jsx)("span",{className:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(i.VF,{children:(0,s.jsx)(r.A,{className:"size-4"})})}),a]})}function m(e){let{className:t,...a}=e;return(0,s.jsx)(i.wv,{"data-slot":"dropdown-menu-separator",className:(0,n.cn)("bg-border -mx-1 my-1 h-px",t),...a})}},5511:(e,t,a)=>{"use strict";a.d(t,{V:()=>d});var s=a(5155);a(2115);var i=a(2355),r=a(3052),n=a(8100),o=a(9434),l=a(285);function d(e){let{className:t,classNames:a,showOutsideDays:d=!0,...c}=e;return(0,s.jsx)(n.hv,{showOutsideDays:d,className:(0,o.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row gap-2",month:"flex flex-col gap-4",caption:"flex justify-center pt-1 relative items-center w-full",caption_label:"text-sm font-medium",nav:"flex items-center gap-1",nav_button:(0,o.cn)((0,l.r)({variant:"outline"}),"size-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-x-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,o.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===c.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,o.cn)((0,l.r)({variant:"ghost"}),"size-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground",day_range_end:"day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,s.jsx)(i.A,{className:(0,o.cn)("size-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,s.jsx)(r.A,{className:(0,o.cn)("size-4",t),...a})}},...c})}},5623:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},6654:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return i}});let s=a(2115);function i(e,t){let a=(0,s.useRef)(null),i=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=a.current;e&&(a.current=null,e());let t=i.current;t&&(i.current=null,t())}else e&&(a.current=r(e,s)),t&&(i.current=r(t,s))},[e,t])}function r(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let a=e(t);return"function"==typeof a?a:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>l,Wu:()=>d,ZB:()=>o,Zp:()=>r,aR:()=>n,wL:()=>c});var s=a(5155);a(2115);var i=a(9434);function r(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,i.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,i.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,i.cn)("leading-none font-semibold",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,i.cn)("text-muted-foreground text-sm",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,i.cn)("px-6",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,i.cn)("flex items-center px-6 [.border-t]:pt-6",t),...a})}},8769:(e,t,a)=>{Promise.resolve().then(a.bind(a,9285))},9285:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>V});var s=a(5155),i=a(2115),r=a(5695),n=a(6874),o=a.n(n),l=a(3008),d=a(1368),c=a(9946);let u=(0,c.A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var m=a(285),x=a(6695),p=a(2346);function v(e){switch(e){case"AI Processed":return"text-green-600 bg-green-50 px-2 py-1 rounded-full text-xs font-medium";case"Pending AI":return"text-yellow-600 bg-yellow-50 px-2 py-1 rounded-full text-xs font-medium";case"Needs Human Review":return"text-red-600 bg-red-50 px-2 py-1 rounded-full text-xs font-medium";case"Duplicate?":return"text-purple-600 bg-purple-50 px-2 py-1 rounded-full text-xs font-medium";default:return"text-gray-600 bg-gray-50 px-2 py-1 rounded-full text-xs font-medium"}}var h=a(4268),f=a(6108),g=a(5511),y=a(2523),j=a(4636),b=a(9409);let N=e=>{let{invoice:t,isEditing:a,stores:i,statuses:r,invoiceTypes:n,accountCodes:o,onInvoiceChange:d,getStatusClass:c}=e;return(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xs font-medium text-muted-foreground",children:"Invoice Number"}),a?(0,s.jsx)(y.p,{value:t.invoiceNumber,onChange:e=>{d("invoiceNumber",e.target.value)},className:"h-7 text-sm"}):(0,s.jsx)("p",{children:t.invoiceNumber})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xs font-medium text-muted-foreground",children:"Date"}),a?(0,s.jsxs)(j.AM,{children:[(0,s.jsx)(j.Wv,{asChild:!0,children:(0,s.jsx)(m.$,{variant:"outline",className:"w-full justify-start text-left font-normal h-7 text-sm",children:(0,l.GP)(t.date,"dd MMM yyyy")})}),(0,s.jsx)(j.hl,{className:"w-auto p-0",children:(0,s.jsx)(g.V,{mode:"single",selected:t.date,onSelect:e=>{e&&d("date",e)},initialFocus:!0})})]}):(0,s.jsx)("p",{children:(0,l.GP)(t.date,"dd MMM yyyy")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xs font-medium text-muted-foreground",children:"Status"}),a?(0,s.jsxs)(b.l6,{value:t.status,onValueChange:e=>{d("status",e)},children:[(0,s.jsx)(b.bq,{className:"h-7 text-sm",children:(0,s.jsx)(b.yv,{placeholder:"Select status"})}),(0,s.jsx)(b.gC,{children:r.map(e=>(0,s.jsx)(b.eb,{value:e,className:"text-sm",children:e},e))})]}):(0,s.jsx)("span",{className:c(t.status),children:t.status})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xs font-medium text-muted-foreground",children:"Store"}),a?(0,s.jsxs)(b.l6,{value:t.store,onValueChange:e=>{d("store",e)},children:[(0,s.jsx)(b.bq,{className:"h-7 text-sm",children:(0,s.jsx)(b.yv,{placeholder:"Select store"})}),(0,s.jsx)(b.gC,{children:i.map(e=>(0,s.jsx)(b.eb,{value:e,className:"text-sm",children:e},e))})]}):(0,s.jsx)("p",{children:t.store})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xs font-medium text-muted-foreground",children:"Supplier"}),a?(0,s.jsx)(y.p,{value:t.supplier,onChange:e=>{d("supplier",e.target.value)},className:"h-7 text-sm"}):(0,s.jsx)("p",{children:t.supplier})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xs font-medium text-muted-foreground",children:"Invoice Type"}),a?(0,s.jsxs)(b.l6,{value:t.invoiceType,onValueChange:e=>{d("invoiceType",e)},children:[(0,s.jsx)(b.bq,{className:"h-7 text-sm",children:(0,s.jsx)(b.yv,{placeholder:"Select type"})}),(0,s.jsx)(b.gC,{children:n.map(e=>(0,s.jsx)(b.eb,{value:e,className:"text-sm",children:e},e))})]}):(0,s.jsx)("p",{children:t.invoiceType})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xs font-medium text-muted-foreground",children:"Account Code"}),a?(0,s.jsxs)(b.l6,{value:t.accountCode,onValueChange:e=>{d("accountCode",e)},children:[(0,s.jsx)(b.bq,{className:"h-7 text-sm",children:(0,s.jsx)(b.yv,{placeholder:"Select code"})}),(0,s.jsx)(b.gC,{children:o.map(e=>(0,s.jsx)(b.eb,{value:e,className:"text-sm",children:e},e))})]}):(0,s.jsx)("p",{children:t.accountCode})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xs font-medium text-muted-foreground",children:"VAT Rate (%)"}),a?(0,s.jsx)(y.p,{type:"number",value:t.vatRate,onChange:e=>{d("vatRate",parseFloat(e.target.value)||0)},className:"h-7 text-sm",min:"0",max:"100"}):(0,s.jsxs)("p",{children:[t.vatRate,"%"]})]})]})};var w=a(6649),C=a(1124),A=a(7434),I=a(7313);let k=e=>{let{previewType:t,previewUrl:a,invoiceNumber:i,supplier:r,store:n,date:o,total:d}=e;return(0,s.jsx)("div",{className:"border rounded-md overflow-hidden h-full",children:"pdf"===t?(0,s.jsx)("object",{data:"/invoice-previews/".concat(a),type:"application/pdf",className:"w-full h-full min-h-[650px]",children:(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500 p-6",children:[(0,s.jsx)(A.A,{className:"h-12 w-12 mb-4 text-gray-400"}),(0,s.jsx)("p",{className:"text-center",children:"PDF preview not available. Please check that the file exists in the public folder."})]})}):"image"===t?(0,s.jsx)("div",{className:"relative w-full h-full min-h-[650px] bg-gray-100",children:(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500 p-6",children:[(0,s.jsx)(A.A,{className:"h-12 w-12 mb-4 text-gray-400"}),(0,s.jsxs)("p",{className:"text-center",children:["Invoice image for ",i," from ",r]}),(0,s.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Add the image file to public/invoice-previews/",a]})]})}):(0,s.jsxs)(I.tU,{defaultValue:"original",className:"h-full flex flex-col",children:[(0,s.jsxs)(I.j7,{className:"w-full grid grid-cols-2",children:[(0,s.jsx)(I.Xi,{value:"original",children:"Original Document"}),(0,s.jsx)(I.Xi,{value:"processed",children:"AI Processed"})]}),(0,s.jsx)(I.av,{value:"original",className:"m-0 flex-grow",children:(0,s.jsx)("div",{className:"relative w-full h-full min-h-[600px] bg-gray-100",children:(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500 p-6",children:[(0,s.jsx)(A.A,{className:"h-12 w-12 mb-4 text-gray-400"}),(0,s.jsxs)("p",{className:"text-center",children:["Sample invoice from ",r," for ",n," location."]}),(0,s.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Invoice #",i," dated ",(0,l.GP)(o,"dd/MM/yyyy")]}),(0,s.jsx)("p",{className:"mt-4 text-sm text-gray-400",children:"Add your actual invoice documents to the public/invoice-previews folder"})]})})}),(0,s.jsx)(I.av,{value:"processed",className:"m-0 flex-grow",children:(0,s.jsx)("div",{className:"relative w-full h-full min-h-[600px] bg-gray-100",children:(0,s.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500 p-6",children:(0,s.jsxs)("div",{className:"border rounded p-4 w-full max-w-md bg-white shadow-sm",children:[(0,s.jsx)("h3",{className:"font-medium mb-2",children:"AI Extracted Data"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between border-b pb-1",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Invoice Number:"}),(0,s.jsx)("span",{className:"font-medium",children:i})]}),(0,s.jsxs)("div",{className:"flex justify-between border-b pb-1",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Date:"}),(0,s.jsx)("span",{className:"font-medium",children:(0,l.GP)(o,"dd/MM/yyyy")})]}),(0,s.jsxs)("div",{className:"flex justify-between border-b pb-1",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Supplier:"}),(0,s.jsx)("span",{className:"font-medium",children:r})]}),(0,s.jsxs)("div",{className:"flex justify-between border-b pb-1",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Total:"}),(0,s.jsxs)("span",{className:"font-medium",children:["\xa3",d.toFixed(2)]})]})]})]})})})})]})})};var P=a(4838);let S=(0,c.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var _=a(4416),T=a(3717),M=a(5623);let R=(0,c.A)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);var z=a(1788);let E=(0,c.A)("file-archive",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);var q=a(4126);let D=(0,c.A)("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]),U=e=>{let{isEditing:t,onEdit:a,onSave:i,onCancel:r,cardHeader:n=!1}=e;return(0,s.jsx)("div",{className:"flex space-x-1",children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(m.$,{variant:"default",onClick:i,size:n?"sm":"default",children:[(0,s.jsx)(S,{className:"mr-1 ".concat(n?"h-3.5 w-3.5":"h-4 w-4")}),n?"Save":"Save Changes"]}),(0,s.jsxs)(m.$,{variant:"outline",onClick:r,size:n?"sm":"default",children:[(0,s.jsx)(_.A,{className:"mr-1 ".concat(n?"h-3.5 w-3.5":"h-4 w-4")}),"Cancel"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(m.$,{variant:"outline",onClick:a,size:n?"sm":"default",children:[(0,s.jsx)(T.A,{className:"mr-1 ".concat(n?"h-3.5 w-3.5":"h-4 w-4")}),"Edit"]}),n?(0,s.jsxs)(P.rI,{children:[(0,s.jsx)(P.ty,{asChild:!0,children:(0,s.jsxs)(m.$,{variant:"outline",size:"sm",children:[(0,s.jsx)(M.A,{className:"h-3.5 w-3.5"}),"Actions"]})}),(0,s.jsxs)(P.SQ,{align:"end",children:[(0,s.jsxs)(P._2,{children:[(0,s.jsx)(R,{className:"mr-2 h-4 w-4"}),"Print"]}),(0,s.jsxs)(P._2,{children:[(0,s.jsx)(z.A,{className:"mr-2 h-4 w-4"}),"Download"]}),(0,s.jsx)(P.mB,{}),(0,s.jsxs)(P._2,{children:[(0,s.jsx)(E,{className:"mr-2 h-4 w-4"}),"Archive"]}),(0,s.jsx)(P.mB,{}),(0,s.jsxs)(P._2,{className:"text-destructive",children:[(0,s.jsx)(q.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(m.$,{variant:"outline",children:[(0,s.jsx)(z.A,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),(0,s.jsxs)(m.$,{variant:"outline",children:[(0,s.jsx)(D,{className:"mr-2 h-4 w-4"}),"Reprocess"]})]})]})})};function V(){let e=(0,r.useParams)(),t=e&&"id"in e?e.id:void 0,a=t?H.find(e=>e.id===t):void 0,[n,c]=(0,i.useState)(()=>a?{...a,date:new Date(a.date),lineItems:[],storeAllocations:[]}:{id:"",invoiceNumber:"",store:"",supplier:"",date:new Date,subtotal:0,vatRate:0,vat:0,total:0,accountCode:"",invoiceType:"",status:"",previewType:"",previewUrl:"",notes:"",archived:!1,deleted:!1,lineItems:[{id:(0,d.A)(),description:"",quantity:0,unitPrice:0,total:0,accountCode:""}],storeAllocations:[{id:(0,d.A)(),store:"",percentage:100,amount:0}]}),[g,y]=(0,i.useState)(!1),[j,b]=(0,i.useState)(n.lineItems||[]),[A,I]=(0,i.useState)(n.storeAllocations||[{id:(0,d.A)(),store:n.store,percentage:100,amount:n.total}]);if(!a)return(0,s.jsx)("div",{children:"Invoice not found."});let P=["Kings Hill","Tonbridge","Tunbridge Wells","Southborough","Maidstone"],S=(e,t)=>{c(a=>({...a,[e]:t}))},_=()=>{let e=j.reduce((e,t)=>e+t.quantity*t.unitPrice,0),t=e*(n.vatRate/100),a=e+t;c(s=>({...s,subtotal:e,vat:t,total:a})),A.length>0&&I(A.map(e=>1===A.length?{...e,percentage:100,amount:a}:{...e,amount:e.percentage/100*a}))},T=()=>{_(),c(e=>({...e,lineItems:j,storeAllocations:A})),y(!1),console.log("Changes saved successfully")},M=()=>{b(n.lineItems),I(n.storeAllocations||[{id:(0,d.A)(),store:n.store,percentage:100,amount:n.total}]),y(!1)};return(0,s.jsxs)("div",{className:"space-y-6 h-[calc(100vh-8rem)]",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(o(),{href:"/accounting/invoices",children:(0,s.jsx)(m.$,{variant:"outline",size:"icon",children:(0,s.jsx)(u,{className:"h-4 w-4"})})}),(0,s.jsxs)("h1",{className:"text-2xl font-bold",children:["Invoice ",n.invoiceNumber]})]}),(0,s.jsx)(U,{isEditing:g,onEdit:()=>y(!0),onSave:T,onCancel:M})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 h-full",children:[(0,s.jsxs)(x.Zp,{className:"flex flex-col h-full",children:[(0,s.jsx)(x.aR,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)(x.ZB,{className:"text-2xl",children:"Invoice Preview"}),(0,s.jsxs)(x.BT,{children:["Uploaded on ",(0,l.GP)(n.date,"dd MMMM yyyy")," at 09:45 AM by: ____????____"]})]})}),(0,s.jsx)(x.Wu,{className:"flex-grow",children:(0,s.jsx)(k,{previewType:n.previewType,previewUrl:n.previewUrl,invoiceNumber:n.invoiceNumber,supplier:n.supplier,store:n.store,date:n.date,total:n.total})})]}),(0,s.jsxs)(x.Zp,{className:"flex flex-col h-full",children:[(0,s.jsxs)(x.aR,{className:"flex flex-row items-center justify-between py-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(x.ZB,{className:"text-xl",children:["Invoice #",n.invoiceNumber]}),(0,s.jsxs)(x.BT,{className:"text-xs",children:["View the details of invoice #",n.invoiceNumber]})]}),(0,s.jsx)(U,{isEditing:g,onEdit:()=>y(!0),onSave:T,onCancel:M,cardHeader:!0})]}),(0,s.jsxs)(x.Wu,{className:"space-y-3 flex-grow overflow-auto p-3",children:[(0,s.jsx)(N,{invoice:n,isEditing:g,stores:P,statuses:["AI Processed","Pending AI","Needs Human Review","Duplicate?"],invoiceTypes:["Purchase Invoice","Sales Invoice","Credit Note"],accountCodes:["4000-SALES","5000-COGS","6200-MAINT","6300-CLEAN","6400-UTIL","6500-OFFICE","6700-TECH"],onInvoiceChange:S,getStatusClass:v}),(0,s.jsx)(p.w,{className:"my-1"}),(0,s.jsx)(f.A,{lineItems:j,setLineItems:b,isEditing:g,onTotalsUpdate:e=>{let t=e*(n.vatRate/100),a=e+t;c(s=>({...s,subtotal:e,vat:t,total:a}))}}),(0,s.jsx)(C.A,{subtotal:n.subtotal,vatRate:n.vatRate,vat:n.vat,total:n.total}),(0,s.jsx)(p.w,{className:"my-1"}),(0,s.jsx)(w.A,{notes:n.notes,isEditing:g,onNotesChange:e=>{S("notes",e)}}),(0,s.jsx)(p.w,{className:"my-1"}),(0,s.jsx)(h.A,{storeAllocations:A,setStoreAllocations:I,invoiceTotal:n.total,isEditing:g,stores:P})]})]})]})]})}let H=[{id:"1",invoiceNumber:"INV-001",store:"Kings Hill",supplier:"Coca Cola",date:new Date("2023-05-01"),subtotal:380.65,vatRate:20,vat:91.36,total:456.78,accountCode:"5000-COGS",invoiceType:"Purchase Invoice",status:"AI Processed",previewType:"pdf",previewUrl:"invoice-coca-cola.pdf",archived:!1,deleted:!1,notes:"This invoice was processed by AI and verified by the finance team.",lineItems:[{description:"Restaurant Supplies",quantity:2,unitPrice:45.5,accountCode:"SUP-001"},{description:"Food Ingredients",quantity:5,unitPrice:37.25,accountCode:"ING-002"},{description:"Cleaning Services",quantity:1,unitPrice:120.4,accountCode:"SER-003"}],storeAllocations:[{id:"allocation-1",store:"Kings Hill",percentage:100,amount:456.78}]},{id:"2",invoiceNumber:"INV-002",store:"Tonbridge",supplier:"Eden Farms",date:new Date("2023-05-05"),subtotal:192.92,vatRate:20,vat:46.3,total:231.5,accountCode:"5000-COGS",invoiceType:"Purchase Invoice",status:"AI Processed",previewType:"pdf",previewUrl:"invoice-eden-farms.pdf",archived:!1,deleted:!1,lineItems:[{description:"Packaging Materials",quantity:3,unitPrice:32.5,accountCode:"PAC-001"},{description:"Beverages",quantity:10,unitPrice:9.5,accountCode:"BEV-002"},{description:"Marketing Materials",quantity:1,unitPrice:12.42,accountCode:"MKT-003"}],storeAllocations:[{id:"allocation-2",store:"Tonbridge",percentage:100,amount:231.5}]},{id:"3",invoiceNumber:"INV-003",store:"Tunbridge Wells",supplier:"Pepsi Co",date:new Date("2023-05-12"),subtotal:657.71,vatRate:20,vat:157.85,total:789.25,accountCode:"5000-COGS",invoiceType:"Purchase Invoice",status:"Pending AI",previewType:"placeholder",previewUrl:"",archived:!1,deleted:!1,lineItems:[{description:"Kitchen Equipment",quantity:1,unitPrice:450,accountCode:"EQP-001"},{description:"Staff Uniforms",quantity:5,unitPrice:35.75,accountCode:"UNI-002"},{description:"Maintenance Service",quantity:1,unitPrice:23.96,accountCode:"SER-003"}],storeAllocations:[{id:"allocation-3",store:"Tunbridge Wells",percentage:100,amount:789.25}]},{id:"4",invoiceNumber:"INV-004",store:"Kings Hill",supplier:"Office Supplies Ltd",date:new Date("2023-05-15"),subtotal:288,vatRate:20,vat:69.12,total:345.6,accountCode:"6500-OFFICE",invoiceType:"Purchase Invoice",status:"AI Processed",previewType:"placeholder",previewUrl:"",archived:!1,deleted:!1,lineItems:[{description:"Promotional Items",quantity:4,unitPrice:45,accountCode:"MKT-001"},{description:"Cleaning Supplies",quantity:6,unitPrice:18,accountCode:"SUP-002"}],storeAllocations:[{id:"allocation-4",store:"Kings Hill",percentage:100,amount:345.6}]},{id:"5",invoiceNumber:"INV-005",store:"Tonbridge",supplier:"Utility Services",date:new Date("2023-05-20"),subtotal:473.25,vatRate:20,vat:113.58,total:567.9,accountCode:"6400-UTIL",invoiceType:"Purchase Invoice",status:"Needs Human Review",previewType:"placeholder",previewUrl:"",archived:!1,deleted:!1,lineItems:[{description:"Furniture Repair",quantity:1,unitPrice:350,accountCode:"REP-001"},{description:"Office Supplies",quantity:8,unitPrice:15.4,accountCode:"SUP-003"}],storeAllocations:[{id:"allocation-5",store:"Tonbridge",percentage:100,amount:567.9}]},{id:"6",invoiceNumber:"CN-001",store:"Tunbridge Wells",supplier:"Eden Farms",date:new Date("2023-05-25"),subtotal:102.88,vatRate:20,vat:24.69,total:123.45,accountCode:"5000-COGS",invoiceType:"Credit Note",status:"Pending AI",previewType:"placeholder",previewUrl:"",archived:!1,deleted:!1,lineItems:[{description:"Food Items Return",quantity:3,unitPrice:30.5,accountCode:"RET-001"},{description:"Damaged Goods",quantity:1,unitPrice:11.38,accountCode:"RET-002"}],storeAllocations:[{id:"allocation-6",store:"Tunbridge Wells",percentage:100,amount:123.45}]},{id:"7",invoiceNumber:"SI-001",store:"Southborough",supplier:"Marketing Agency",date:new Date("2023-06-01"),subtotal:565.75,vatRate:20,vat:135.78,total:678.9,accountCode:"4000-SALES",invoiceType:"Sales Invoice",status:"AI Processed",previewType:"placeholder",previewUrl:"",archived:!1,deleted:!1,lineItems:[{description:"Marketing Services",quantity:1,unitPrice:565.75,accountCode:"SER-001"}],storeAllocations:[{id:"allocation-7",store:"Southborough",percentage:100,amount:678.9}]},{id:"8",invoiceNumber:"SI-002",store:"Southborough",supplier:"Equipment Ltd",date:new Date("2023-06-05"),subtotal:195.47,vatRate:20,vat:46.91,total:234.56,accountCode:"4000-SALES",invoiceType:"Sales Invoice",status:"Needs Human Review",previewType:"placeholder",previewUrl:"",archived:!1,deleted:!1,lineItems:[{description:"Equipment Sale",quantity:1,unitPrice:195.47,accountCode:"SAL-001"}],storeAllocations:[{id:"allocation-8",store:"Southborough",percentage:100,amount:234.56}]}]},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>r});var s=a(2596),i=a(9688);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[836,822,272,297,510,441,684,358],()=>t(8769)),_N_E=e.O()}]);